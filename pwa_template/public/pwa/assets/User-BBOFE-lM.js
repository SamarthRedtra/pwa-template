var ue=Object.defineProperty;var T=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var V=(t,n,l)=>n in t?ue(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,E=(t,n)=>{for(var l in n||(n={}))z.call(n,l)&&V(t,l,n[l]);if(T)for(var l of T(n))K.call(n,l)&&V(t,l,n[l]);return t};var F=(t,n)=>{var l={};for(var r in t)z.call(t,r)&&n.indexOf(r)<0&&(l[r]=t[r]);if(t!=null&&T)for(var r of T(t))n.indexOf(r)<0&&K.call(t,r)&&(l[r]=t[r]);return l};import{r as y,U as h,g as A,V as ie,h as x,W as ce,X as de,Y as pe,Z as me,$ as ve,a0 as $,a1 as B,a2 as U,a3 as fe,a4 as q,n as ge,a5 as be,a6 as he,a7 as Ie,a8 as b,a9 as R,aa as ye,ab as H,ac as le,ad as _e,m as oe,l as ke,_ as N,e as M,o as _,B as S,w,d as P,H as xe,I as we,N as Q,f as Me,t as L,A as W,a as D,F as Z,p as J,j as X,C as Y,b as Se,s as G,k as De,q as Re,u as ee,z as te}from"./index-D6WzF6ad.js";import{_ as Pe}from"./Avatar.vue_vue_type_script_setup_true_lang-CIzqSjko.js";import{s as Ce,i as Te,u as Fe,f as $e,c as k,P as Ae}from"./Popover-3KP7P3bG.js";let ae=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ne(t){var n,l;let r=(n=t.innerText)!=null?n:"",p=t.cloneNode(!0);if(!(p instanceof HTMLElement))return r;let i=!1;for(let c of p.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),i=!0;let e=i?(l=p.innerText)!=null?l:"":r;return ae.test(e)&&(e=e.replace(ae,"")),e}function Be(t){let n=t.getAttribute("aria-label");if(typeof n=="string")return n.trim();let l=t.getAttribute("aria-labelledby");if(l){let r=l.split(" ").map(p=>{let i=document.getElementById(p);if(i){let e=i.getAttribute("aria-label");return typeof e=="string"?e.trim():ne(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ne(t).trim()}function Oe(t){let n=y(""),l=y("");return()=>{let r=h(t);if(!r)return"";let p=r.innerText;if(n.value===p)return l.value;let i=Be(r).trim().toLowerCase();return n.value=p,l.value=i,i}}var Ee=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Ee||{}),Le=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Le||{});function Ne(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let re=Symbol("MenuContext");function O(t){let n=Ie(re,null);if(n===null){let l=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,O),l}return n}let Ue=A({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:n,attrs:l}){let r=y(1),p=y(null),i=y(null),e=y([]),c=y(""),d=y(null),f=y(1);function I(a=s=>s){let s=d.value!==null?e.value[d.value]:null,o=_e(a(e.value.slice()),g=>h(g.dataRef.domRef)),u=s?o.indexOf(s):null;return u===-1&&(u=null),{items:o,activeItemIndex:u}}let m={menuState:r,buttonRef:p,itemsRef:i,items:e,searchQuery:c,activeItemIndex:d,activationTrigger:f,closeMenu:()=>{r.value=1,d.value=null},openMenu:()=>r.value=0,goToItem(a,s,o){let u=I(),g=$e(a===k.Specific?{focus:k.Specific,id:s}:{focus:a},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.disabled});c.value="",d.value=g,f.value=o!=null?o:1,e.value=u.items},search(a){let s=c.value!==""?0:1;c.value+=a.toLowerCase();let o=(d.value!==null?e.value.slice(d.value+s).concat(e.value.slice(0,d.value+s)):e.value).find(g=>g.dataRef.textValue.startsWith(c.value)&&!g.dataRef.disabled),u=o?e.value.indexOf(o):-1;u===-1||u===d.value||(d.value=u,f.value=1)},clearSearch(){c.value=""},registerItem(a,s){let o=I(u=>[...u,{id:a,dataRef:s}]);e.value=o.items,d.value=o.activeItemIndex,f.value=1},unregisterItem(a){let s=I(o=>{let u=o.findIndex(g=>g.id===a);return u!==-1&&o.splice(u,1),o});e.value=s.items,d.value=s.activeItemIndex,f.value=1}};return ie([p,i],(a,s)=>{var o;m.closeMenu(),ce(s,de.Loose)||(a.preventDefault(),(o=h(p))==null||o.focus())},x(()=>r.value===0)),pe(re,m),me(x(()=>ve(r.value,{0:$.Open,1:$.Closed}))),()=>{let a={open:r.value===0,close:m.closeMenu};return B({ourProps:{},theirProps:t,slot:a,slots:n,attrs:l,name:"Menu"})}}}),je=A({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:n,slots:l,expose:r}){var p;let i=(p=t.id)!=null?p:`headlessui-menu-button-${U()}`,e=O("MenuButton");r({el:e.buttonRef,$el:e.buttonRef});function c(m){switch(m.key){case b.Space:case b.Enter:case b.ArrowDown:m.preventDefault(),m.stopPropagation(),e.openMenu(),R(()=>{var a;(a=h(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(k.First)});break;case b.ArrowUp:m.preventDefault(),m.stopPropagation(),e.openMenu(),R(()=>{var a;(a=h(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(k.Last)});break}}function d(m){switch(m.key){case b.Space:m.preventDefault();break}}function f(m){t.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var a;return(a=h(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(m.preventDefault(),e.openMenu(),Ne(()=>{var a;return(a=h(e.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let I=Ce(x(()=>({as:t.as,type:n.type})),e.buttonRef);return()=>{var m;let a={open:e.menuState.value===0},s=F(t,[]),o={ref:e.buttonRef,id:i,type:I.value,"aria-haspopup":"menu","aria-controls":(m=h(e.itemsRef))==null?void 0:m.id,"aria-expanded":e.menuState.value===0,onKeydown:c,onKeyup:d,onClick:f};return B({ourProps:o,theirProps:s,slot:a,attrs:n,slots:l,name:"MenuButton"})}}}),Ve=A({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:n,slots:l,expose:r}){var p;let i=(p=t.id)!=null?p:`headlessui-menu-items-${U()}`,e=O("MenuItems"),c=y(null);r({el:e.itemsRef,$el:e.itemsRef}),Te({container:x(()=>h(e.itemsRef)),enabled:x(()=>e.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function d(a){var s;switch(c.value&&clearTimeout(c.value),a.key){case b.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case b.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeItemIndex.value!==null){let o=e.items.value[e.activeItemIndex.value];(s=h(o.dataRef.domRef))==null||s.click()}e.closeMenu(),le(h(e.buttonRef));break;case b.ArrowDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(k.Next);case b.ArrowUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(k.Previous);case b.Home:case b.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(k.First);case b.End:case b.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(k.Last);case b.Escape:a.preventDefault(),a.stopPropagation(),e.closeMenu(),R(()=>{var o;return(o=h(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case b.Tab:a.preventDefault(),a.stopPropagation(),e.closeMenu(),R(()=>ye(h(e.buttonRef),a.shiftKey?H.Previous:H.Next));break;default:a.key.length===1&&(e.search(a.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function f(a){switch(a.key){case b.Space:a.preventDefault();break}}let I=fe(),m=x(()=>I!==null?(I.value&$.Open)===$.Open:e.menuState.value===0);return()=>{var a,s;let o={open:e.menuState.value===0},u=F(t,[]),g={"aria-activedescendant":e.activeItemIndex.value===null||(a=e.items.value[e.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(s=h(e.buttonRef))==null?void 0:s.id,id:i,onKeydown:d,onKeyup:f,role:"menu",tabIndex:0,ref:e.itemsRef};return B({ourProps:g,theirProps:u,slot:o,attrs:n,slots:l,features:q.RenderStrategy|q.Static,visible:m.value,name:"MenuItems"})}}}),ze=A({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:n,attrs:l,expose:r}){var p;let i=(p=t.id)!=null?p:`headlessui-menu-item-${U()}`,e=O("MenuItem"),c=y(null);r({el:c,$el:c});let d=x(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===i:!1),f=Oe(c),I=x(()=>({disabled:t.disabled,get textValue(){return f()},domRef:c}));ge(()=>e.registerItem(i,I)),be(()=>e.unregisterItem(i)),he(()=>{e.menuState.value===0&&d.value&&e.activationTrigger.value!==0&&R(()=>{var v,C;return(C=(v=h(c))==null?void 0:v.scrollIntoView)==null?void 0:C.call(v,{block:"nearest"})})});function m(v){if(t.disabled)return v.preventDefault();e.closeMenu(),le(h(e.buttonRef))}function a(){if(t.disabled)return e.goToItem(k.Nothing);e.goToItem(k.Specific,i)}let s=Fe();function o(v){s.update(v)}function u(v){s.wasMoved(v)&&(t.disabled||d.value||e.goToItem(k.Specific,i,0))}function g(v){s.wasMoved(v)&&(t.disabled||d.value&&e.goToItem(k.Nothing))}return()=>{let j=t,{disabled:v}=j,C=F(j,["disabled"]),se={active:d.value,disabled:v,close:e.closeMenu};return B({ourProps:{id:i,ref:c,role:"menuitem",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,onClick:m,onFocus:a,onPointerenter:o,onMouseenter:o,onPointermove:u,onMousemove:u,onPointerleave:g,onMouseleave:g},theirProps:E(E({},l),C),slot:se,attrs:l,slots:n,name:"MenuItem"})}}});const Ke={name:"Dropdown",props:{button:{type:Object,default:null},options:{type:Array,default:()=>[]},placement:{type:String,default:"left"}},components:{Menu:Ue,MenuButton:je,MenuItems:Ve,MenuItem:ze,Button:ke,FeatherIcon:N,Popover:Ae},methods:{normalizeDropdownItem(t){let n=t.onClick||null;return!n&&t.route&&this.$router&&(n=()=>this.$router.push(t.route)),{label:t.label,icon:t.icon,group:t.group,component:t.component,onClick:n}},filterOptions(t){return(t||[]).filter(Boolean).filter(n=>n.condition?n.condition():!0).map(n=>this.normalizeDropdownItem(n))}},computed:{groups(){var n;return((n=this.options[0])!=null&&n.group?this.options:[{group:"",items:this.options}]).map((l,r)=>({key:r,group:l.group,hideLabel:l.hideLabel||!1,items:this.filterOptions(l.items)}))},dropdownTransition(){return{enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"}},popoverPlacement(){return this.placement==="left"?"bottom-start":this.placement==="right"?"bottom-end":this.placement==="center"?"bottom-center":"bottom"}}},qe={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-gray-500"},He=["onClick"],Qe={class:"whitespace-nowrap"};function We(t,n,l,r,p,i){const e=M("Button"),c=M("MenuButton"),d=M("FeatherIcon"),f=M("MenuItem"),I=M("MenuItems"),m=M("Popover"),a=M("Menu");return _(),S(a,{as:"div",class:"relative inline-block text-left"},{default:w(({open:s})=>[P(m,{transition:i.dropdownTransition,show:s,placement:i.popoverPlacement},{target:w(()=>[P(c,{as:"div"},{default:w(()=>[t.$slots.default?xe(t.$slots,"default",we(Q({key:0},{open:s}))):(_(),S(e,Q({key:1,active:s},l.button),{default:w(()=>{var o;return[Me(L(l.button?((o=l.button)==null?void 0:o.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:w(()=>[P(I,{class:W(["mt-2 min-w-40 divide-y divide-gray-100 rounded-lg bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":l.placement=="left","right-0 origin-top-right":l.placement=="right","inset-x-0 origin-top":l.placement=="center"}])},{default:w(()=>[(_(!0),D(Z,null,J(i.groups,o=>(_(),D("div",{key:o.key,class:"p-1.5"},[o.group&&!o.hideLabel?(_(),D("div",qe,L(o.group),1)):X("",!0),(_(!0),D(Z,null,J(o.items,u=>(_(),S(f,{key:u.label},{default:w(({active:g})=>[u.component?(_(),S(Y(u.component),{key:0,active:g},null,8,["active"])):(_(),D("button",{key:1,class:W([g?"bg-gray-100":"text-gray-800","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:u.onClick},[u.icon&&typeof u.icon=="string"?(_(),S(d,{key:0,name:u.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700","aria-hidden":"true"},null,8,["name"])):u.icon?(_(),S(Y(u.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700"})):X("",!0),Se("span",Qe,L(u.label),1)],10,He))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3})}const Ze=oe(Ke,[["render",We]]),Je={__name:"User",setup(t){const n=x(()=>G.user),l=y(""),r=y(window.location.href),p=De(),i=x(()=>{const f=new URL(r.value);return`${f.protocol}//${f.hostname}`}),e=x(()=>l.value?`${i.value}${l.value}`:""),c=Re({doctype:"User",fields:["*"],filters:{name:n.value}});c.reload().then(()=>{l.value=c.data[0].user_image||""});const d=[{group:"User Actions",items:[{label:"About",icon:()=>te(N,{name:"alert-circle"}),onClick:()=>{p.push("about")}},{label:"Logout",icon:()=>te(N,{name:"log-out"}),onClick:()=>{G.logout.submit()}}]}];return(f,I)=>(_(),D("div",null,[P(ee(Ze),{options:d,trigger:"click"},{default:w(()=>[P(ee(Pe),{shape:"square",image:e.value,label:n.value,size:"xl",class:"cursor-pointer"},null,8,["image","label"])]),_:1})]))}},tt=oe(Je,[["__scopeId","data-v-5e199ab7"]]);export{Ze as D,tt as U};
