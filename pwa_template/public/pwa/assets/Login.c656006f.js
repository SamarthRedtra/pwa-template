import{g as B,h as D,r as l,i,o as f,a as m,b as e,j as H,d as t,w as o,u as n,_ as V,k as j,l as _,t as M,e as w,s as S,m as T,T as L,F as O,f as A}from"./index.4c13865c.js";const I={class:"w-full sm:w-96 bg-[#f4f5f7] flex justify-center items-center h-screen"},z={class:"w-full h-96 flex justify-center items-center"},J={class:"w-full object-center justify-center flex"},K=["src"],Q={class:"bg-white rounded-lg w-80 h-76 mt-4"},W={class:"p-4"},X={key:0,class:"text-red-500 text-xs pl-2"},Y={class:"relative"},Z={key:1,class:"text-red-500 text-xs pl-2"},ee={class:"w-full"},se=e("div",{class:"flex justify-center"},[e("p",{class:"text-xs p-1 text-gray-600"},"or")],-1),te={class:"fixed bottom-0 flex justify-end w-full sm:w-96"},ae={key:0,class:"w-full sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-green-500 rounded-lg opacity-100 font-regular animate-slide-in-right animate-fade-out"},le={key:0,class:"w-full sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-red-500 rounded-lg opacity-100 font-regular animate-slide-in-right animate-fade-out"},re=B({__name:"Login",setup(oe){const U=D(),u=l(""),p=l(""),v=l(!1),c=l(!1),d=l(!1),g=l(!1),h=i(()=>u.value.includes("@")||u.value==="Administrator"),x=i(()=>!!p.value),C=i(()=>v.value?"text":"password"),$=i(()=>v.value?"Hide":"Show"),E=()=>{v.value=!v.value},F=s=>{g.value=!0,!(!h.value||!x.value)&&S.login.submit({email:u.value,password:p.value}).then(a=>{c.value=!0,d.value=!1,setTimeout(()=>{c.value=!1,d.value=!1},1e3)}).catch(a=>{console.error(a),c.value=!1,d.value=!0,setTimeout(()=>{c.value=!1,d.value=!1},1e3)})},P=()=>{U.push("/signup")},y=l(""),R=l(window.location.href),q=i(()=>{const s=new URL(R.value);return`${s.protocol}//${s.hostname}`}),G=i(()=>`${q.value}:8001/assets`),b=new Headers;b.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const N={method:"GET",headers:b,redirect:"follow"};return fetch(G.value,N).then(s=>s.text()).then(s=>{const r=new DOMParser().parseFromString(s,"text/html").querySelector('link[rel="shortcut icon"]');r&&(y.value=r.href)}).catch(s=>console.error(s)),(s,a)=>{const k=A("router-link");return f(),m(O,null,[e("div",I,[e("div",z,[e("div",null,[e("div",J,[e("img",{src:y.value,class:"w-16 h-16 object-cover rounded-lg"},null,8,K)]),e("div",Q,[e("div",W,[e("form",{class:"flex flex-col space-y-2 w-full",onSubmit:H(F,["prevent"])},[t(n(j),{required:"",type:"text",label:"User ID",name:"email",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=r=>u.value=r),placeholder:"johndoe@email.com",class:"p-2"},{prefix:o(()=>[t(n(V),{class:"w-4",name:"mail"})]),_:1},8,["modelValue"]),g.value&&!h.value?(f(),m("div",X," Enter a valid email ")):_("",!0),e("div",Y,[t(n(j),{required:"",label:"Password",name:"password",modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=r=>p.value=r),type:C.value,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",class:"p-2 w-full"},{prefix:o(()=>[t(n(V),{class:"w-4",name:"lock"})]),_:1},8,["modelValue","type"]),e("span",{onClick:E,class:"absolute right-2 top-7 cursor-pointer text-gray-600 text-sm p-2"},M($.value),1)]),g.value&&!x.value?(f(),m("div",Z," Enter password ")):_("",!0),e("div",ee,[t(k,{to:"/forget-password",class:"pb-1 text-xs text-gray-600 justify-end flex pr-2 hover:underline"},{default:o(()=>[w(" Forgot Password? ")]),_:1})]),t(n(T),{loading:n(S).login.loading,variant:"solid",class:"w-full"},{default:o(()=>[w("Login")]),_:1},8,["loading"]),se,t(n(T),{variant:"subtle",class:"w-full",onClick:P},{default:o(()=>[w("Sign up")]),_:1})],32)])])])])]),e("div",te,[t(L,{name:"fade"},{default:o(()=>[c.value?(f(),m("div",ae," Login successfully ")):_("",!0)]),_:1}),t(L,{name:"fade"},{default:o(()=>[d.value?(f(),m("div",le," Login failed ")):_("",!0)]),_:1})])],64)}}});export{re as default};
