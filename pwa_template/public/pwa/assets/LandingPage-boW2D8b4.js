import{m as P,r as c,y as V,a as o,b as a,d as l,u as n,w as $,F as x,p as b,j as N,k as S,q,c as D,o as r,_ as d,t as k,i as I,v as R,x as j}from"./index-D6WzF6ad.js";import{U as z}from"./User-BBOFE-lM.js";import{_ as A}from"./FormControl.vue_vue_type_script_setup_true_lang-C4lNgMaF.js";import"./Avatar.vue_vue_type_script_setup_true_lang-CIzqSjko.js";import"./Popover-3KP7P3bG.js";import"./TextInput.vue_vue_type_script_setup_true_lang-TNnHxwuu.js";const B=i=>(R("data-v-be6a1fd1"),i=i(),j(),i),O={class:"w-full sm:w-96 bg-gray-100 flex justify-center h-screen"},T={class:"w-full flex flex-col"},U={class:"w-full sm:w-96 bg-white h-14 shadow-lg fixed top-0 z-10"},W={class:"p-2 flex pt-3"},E={class:"relative w-full"},M={key:0,class:"absolute left-[1rem] right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 z-20"},Q=["onClick"],G={class:"w-full flex justify-end"},H={class:"p-1 pr-4 mb-2"},J={class:"mt-14 w-full h-full"},K={class:"p-4"},X=B(()=>a("p",{class:"font-medium text-xl pl-1 text-gray-600"},"Quick Link",-1)),Y={class:"bg-white h-[28rem] w-full rounded-lg mt-2 overflow-y-auto no-scrollbar p-2"},Z=["onClick"],ee={class:"text-gray-600 pl-3 truncate w-[8rem]"},te=["onClick"],se={__name:"LandingPage",setup(i){const C=()=>{f.push("/notifications")},u=c(""),p=c(!1),h=c([]),m=c([]),f=S(),_=c(""),v=c([]);(()=>{const e=q({doctype:"PWA Form",fields:["*"],filters:_.value?{name:_.value}:{}});e.reload().then(()=>{h.value=e.data.map(t=>({id:t.name,frm:t.form_name,doctype:t.doctype_name}))})})(),V(u,e=>{v.value=["PWA Form","doctype_name","like",`%${e}%`],y()});const g=e=>{u.value=e.doctype_name,f.push({name:"ListPage",query:{frmname:e.name,doctype:e.doctype_name}}),p.value=!1},F=e=>{f.push({name:"ListPage",query:{frmname:e.frm,doctype:e.doctype}})},L=e=>{f.push({name:"Form",query:{frmname:e.frm,doctype:e.doctype}})},y=()=>{const e=D({url:"frappe.desk.reportview.get",method:"POST",params:{doctype:"PWA Form",filters:v.value.length>0?[v.value]:[],fields:["*"],distinct:!1,start:0,page_length:v.value.length>0?500:5}});e.fetch().then(()=>{const t=e.data;t.values&&(t.values.map?m.value=t.values.map(s=>({name:s[0],doctype_name:s[9]})):m.value=[])})};return y(),document.addEventListener("click",e=>{e.target.closest(".relative")||(p.value=!1)}),(e,t)=>(r(),o("div",O,[a("div",T,[a("div",U,[a("div",W,[l(n(d),{class:"w-6 h-6 mt-1 text-gray-600 hover:text-black",name:"list"}),a("div",E,[l(n(A),{type:"text",size:"sm",variant:"subtle",placeholder:"Search...",disabled:!1,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onFocus:t[1]||(t[1]=s=>p.value=!0),class:"flex-grow pl-4 w-full pt-[3px]"},{prefix:$(()=>[l(n(d),{class:"w-4",name:"search"})]),_:1},8,["modelValue"]),p.value?(r(),o("div",M,[m.value.length>0?(r(!0),o(x,{key:0},b(m.value,s=>(r(),o("div",{key:s,class:"p-2 hover:bg-gray-200 cursor-pointer",onClick:w=>g(s)},k(s.doctype_name),9,Q))),128)):(r(),o("div",{key:1,class:"p-2 hover:bg-gray-200 cursor-pointer text-[12px] text-gray-600",onClick:t[2]||(t[2]=s=>g(e.option))}," No Record Found "))])):N("",!0)]),a("div",G,[a("div",H,[l(n(d),{class:"w-6 h-6 text-gray-600 pt-1 hover:text-black",name:"bell",onClick:C})]),l(z)])])]),a("div",J,[a("div",K,[X,a("div",Y,[(r(!0),o(x,null,b(h.value,s=>(r(),o("div",{key:s.id,class:"border-gray-200 border-b-[1.5px]"},[a("div",{class:"p-2 flex pt-2 touchable",onClick:w=>F(s)},[l(n(d),{name:"link",class:"text-gray-600 h-5 w-5"}),a("p",ee,k(s.doctype),1),a("div",{class:"ml-auto touchable",onClick:I(w=>L(s),["stop"])},[l(n(d),{name:"plus",class:"text-gray-600 h-5 w-5 hover:text-black"})],8,te)],8,Z)]))),128))])])])])]))}},ie=P(se,[["__scopeId","data-v-be6a1fd1"]]);export{ie as default};
